"use strict";let t,csv_string;function e(){const e={table:document.getElementById("table_base"),cell:document.getElementById("cell_base"),row:document.getElementById("row_base"),header_cell:document.getElementById("header_cell_base"),header:document.getElementById("header_base"),silver:document.getElementById("silver_base"),gold:document.getElementById("gold_base"),iridium:document.getElementById("iridium_base")};t={table:()=>e.table.content.cloneNode(!0).firstElementChild,header_cell:function(t){const n=e.header_cell.content.cloneNode(!0);return n.firstElementChild.insertAdjacentHTML("beforeend",t),n},header:function(t){const n=e.header.content.cloneNode(!0);return n.firstElementChild.appendChild(t),n},silver:()=>e.silver.content.cloneNode(!0),gold:()=>e.gold.content.cloneNode(!0),iridium:()=>e.iridium.content.cloneNode(!0)}}function file_opened(t){u(!0);const e=t.target,n=new FileReader;n.onload=function(){const t=i(n.result);l(["items.min.xslt","items-to-csv.min.xslt"]).then((function(e){const n=d(i(e[0]),t);o(s(d(i(e[1]),n))),u(!1)}))},n.readAsText(e.files[0])}function n(){const t=localStorage.getItem("csv");t&&(u(!0),csv_string=t,o(t),u(!1))}function o(e){let n=t.table();const o=a(e);n=m(o,n),n=b(o,n),h(n),x()}function c(t){t.style.display="none"}function r(t){t.style.removeProperty("display")}function u(t){const e=document.getElementById("loading"),n=document.querySelector("input[type=file]");t?(r(e),c(n)):(r(n),c(e))}function i(t){return(new DOMParser).parseFromString(t,"text/xml")}function l(t){let e=[];for(let n=0;n<t.length;n++)e.push(fetch(t[n]).then(t=>t.text()));return Promise.all(e)}function d(t,e){const n=new XSLTProcessor;return n.importStylesheet(t),n.transformToFragment(e,new Document)}function s(t){return csv_string=t.firstChild.wholeText,localStorage.setItem("csv",csv_string),csv_string}function a(t){return t.split("\n").map(t=>t.split(","))}function f(t,e){t.appendChild(document.createTextNode(e))}function m(t,e){for(let n=1;n<t.length-1;n++){const o=e.insertRow();for(let e=0;e<t[n].length;e++){const c=o.insertCell();1!==e?f(c,w(t[n][e])):c.appendChild(_(t[n][e]))}}return e}function b(e,n){let o=new DocumentFragment;for(let n=0;n<e[0].length;n++)o.append(t.header_cell(e[0][n]));return n.tHead.appendChild(t.header(o)),n}function _(e){switch(e){case"Silver":return t.silver();case"Gold":return t.gold();case"Iridium":return t.iridium();default:return document.createTextNode("")}}function w(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,"â€¯")}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e(),window.addEventListener("load",()=>n());let g=!1;function h(t){c(document.querySelector("article")),g&&document.getElementById("item_table").remove(),t=p(t),document.getElementById("table_container").appendChild(t),r(document.querySelector("article")),g=!0,document.getElementById("filter").focus()}function v(t){const e=t.match(/\d/g);return e?Number(e.join("")):0}function p(t){const e=t.tFoot;let n=0,o=0;const c="filter_"+y;for(;e.rows[0];)e.rows[0].remove();for(let e,r=0;e=t.tBodies[0].rows[r];r++)e.classList.contains(c)||(o+=v(e.cells[3].textContent),n+=v(e.cells[5].textContent));const r=e.insertRow(),u=()=>f(r.insertCell(),"");return f(r.insertCell(),"Total"),u(),u(),f(r.insertCell(),w(o)),u(),f(r.insertCell(),w(n)),t}function x(){const t=document.getElementById("item_table"),e=new Tablesort(t);Tablesort.extend("number",t=>t.match(/\d/),(t,e)=>v(t)-v(e));const n=t.tHead.rows[0].cells;for(let t=0;t<n.length;t++)n[t].addEventListener("keydown",(function(t){"Enter"===t.key&&e.sortTable(t.srcElement)}))}function download_as_csv(t){const e=document.createElement("a");e.setAttribute("href","data:text/csv;charset=utf-8,"+encodeURIComponent(t)),e.setAttribute("download","Stardew Valley Items.csv"),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)}let y=1;function filter_table(){const t=document.getElementById("filter").value,e=document.getElementById("item_table"),n=e.tBodies[0].rows,o=RegExp(t,"i"),c=y-1-1,r="filter_"+y,u="filter_"+c;for(let t=0;t<n.length;t++){let e=n[t];e.textContent.match(o)||e.classList.add(r),e.classList.remove(u)}const i=document.styleSheets[0];i.insertRule(`.${r} {display:none}`),c>=0&&i.deleteRule(1);p(e);y++}
//# sourceMappingURL=item-finder.min.js.map