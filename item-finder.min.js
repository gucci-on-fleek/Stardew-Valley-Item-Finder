"use strict";let e,csv_string;function file_opened(t){o(!0);const n=t.target,d=new FileReader;d.onload=function(){const t=c(d.result);r(["items.min.xslt","items-to-csv.min.xslt"]).then((function(n){let r=e.table();const d=u(c(n[0]),t),a=l(i(u(c(n[1]),d)));r=s(a,r),r=f(a,r),_(r),g(),o(!1)}))},d.readAsText(n.files[0])}function t(e){e.style.display="none"}function n(e){e.style.removeProperty("display")}function o(e){const o=document.getElementById("loading"),c=document.querySelector("input[type=file]");e?(n(o),t(c)):(n(c),t(o))}function c(e){return(new DOMParser).parseFromString(e,"text/xml")}function r(e){let t=[];for(let n=0;n<e.length;n++)t.push(fetch(e[n]).then(e=>e.text()));return Promise.all(t)}function u(e,t){const n=new XSLTProcessor;return n.importStylesheet(e),n.transformToFragment(t,new Document)}function i(e){return csv_string=e.firstChild.wholeText,csv_string}function l(e){return e.split("\n").map(e=>e.split(","))}function d(e,t){e.appendChild(document.createTextNode(t))}function s(e,t){for(let n=1;n<e.length-1;n++){const o=t.insertRow();for(let t=0;t<e[n].length;t++){const c=o.insertCell();1!==t?d(c,m(e[n][t])):c.appendChild(a(e[n][t]))}}return t}function f(t,n){let o=new DocumentFragment;for(let n=0;n<t[0].length;n++)o.append(e.header_cell(t[0][n]));return n.tHead.appendChild(e.header(o)),n}function a(t){switch(t){case"Silver":return e.silver();case"Gold":return e.gold();case"Iridium":return e.iridium();default:return document.createTextNode("")}}function m(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,"â€¯")}window.onload=function(t){const n={table:document.getElementById("table_base"),cell:document.getElementById("cell_base"),row:document.getElementById("row_base"),header_cell:document.getElementById("header_cell_base"),header:document.getElementById("header_base"),silver:document.getElementById("silver_base"),gold:document.getElementById("gold_base"),iridium:document.getElementById("iridium_base")};e={table:()=>n.table.content.cloneNode(!0).firstElementChild,header_cell:function(e){const t=n.header_cell.content.cloneNode(!0);return t.firstElementChild.insertAdjacentHTML("beforeend",e),t},header:function(e){const t=n.header.content.cloneNode(!0);return t.firstElementChild.appendChild(e),t},silver:()=>n.silver.content.cloneNode(!0),gold:()=>n.gold.content.cloneNode(!0),iridium:()=>n.iridium.content.cloneNode(!0)}};let b=!1;function _(e){t(document.querySelector("article")),b&&document.getElementById("item_table").remove(),e=h(e),document.getElementById("table_container").appendChild(e),n(document.querySelector("article")),b=!0,document.getElementById("filter").focus()}function w(e){const t=e.match(/\d/g);return t?Number(t.join("")):0}function h(e){const t=e.tFoot;let n=0,o=0;const c="filter_"+v;for(;t.rows[0];)t.rows[0].remove();for(let t,r=0;t=e.tBodies[0].rows[r];r++)t.classList.contains(c)||(o+=w(t.cells[3].textContent),n+=w(t.cells[5].textContent));const r=t.insertRow(),u=()=>d(r.insertCell(),"");return d(r.insertCell(),"Total"),u(),u(),d(r.insertCell(),m(o)),u(),d(r.insertCell(),m(n)),e}function g(){const e=document.getElementById("item_table"),t=new Tablesort(e);Tablesort.extend("number",e=>e.match(/\d/),(e,t)=>w(e)-w(t));const n=e.tHead.rows[0].cells;for(let e=0;e<n.length;e++)n[e].addEventListener("keydown",(function(e){"Enter"===e.key&&t.sortTable(e.srcElement)}))}function download_as_csv(e){const t=document.createElement("a");t.setAttribute("href","data:text/csv;charset=utf-8,"+encodeURIComponent(e)),t.setAttribute("download","Stardew Valley Items.csv"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)}let v=1;function filter_table(){const e=document.getElementById("filter").value,t=document.getElementById("item_table"),n=t.tBodies[0].rows,o=RegExp(e,"i"),c=v-1-1,r="filter_"+v,u="filter_"+c;for(let e=0;e<n.length;e++){let t=n[e];t.textContent.match(o)||t.classList.add(r),t.classList.remove(u)}const i=document.styleSheets[0];i.insertRule(`.${r} {display:none}`),c>=0&&i.deleteRule(1);h(t);v++}
//# sourceMappingURL=item-finder.min.js.map