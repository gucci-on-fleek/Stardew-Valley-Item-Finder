<!DOCTYPE html>
<html lang="en">
<!-- Stardew Valley Item Finder
     https://gucci-on-fleek.github.io/Stardew-Valley-Item-Finder/
     Licensed under MPL 2.0 or greater. See URL for more information.
-->

<head>
    <!-- Basic meta tags -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Stardew Valley Item Finder</title>
    <meta name="description"
        content="This tool extracts information about all of your items in Stardew Valley and displays it in a table. The table shows the item’s name, location, and price." />

    <!-- Styling -->
    <meta name="theme-color" content="#241504" />
    <meta name="color-scheme" content="light dark">
    <link rel="stylesheet" href="item-finder.css" />

    <!-- Preloads -->
    <link rel="preload" href="items.xslt" as="fetch" crossorigin="anonymous" />
    <link rel="preload" href="items-to-csv.xslt" as="fetch" crossorigin="anonymous" />
    <link rel="prefetch" href="assets/gold_star.png" as="image" />
    <link rel="prefetch" href="assets/silver_star.png" as="image" />
    <link rel="prefetch" href="assets/iridium_star.png" as="image" />
    <link rel="preload" href="service-worker.js" as="script"
        onload="navigator.serviceWorker.register('service-worker.js')" />
    <link rel="manifest" href="manifest.webmanifest" />

    <!-- Icons -->
    <link rel="icon" type="image/png" sizes="196x196" href="assets/icon-192.png">
    <link rel="icon" type="image/png" sizes="160x160" href="assets/icon-160.png">
    <link rel="icon" type="image/png" sizes="96x96" href="assets/icon-96.png">
    <link rel="icon" type="image/png" sizes="64x64" href="assets/icon-64.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/icon-32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/icon-16.png">
    <link rel="apple-touch-icon" href="assets/icon-57.png">
    <link rel="apple-touch-icon" sizes="114x114" href="assets/icon-114.png">
    <link rel="apple-touch-icon" sizes="72x72" href="assets/icon-72.png">
    <link rel="apple-touch-icon" sizes="144x144" href="assets/icon-144.png">
    <link rel="apple-touch-icon" sizes="60x60" href="assets/icon-60.png">
    <link rel="apple-touch-icon" sizes="120x120" href="assets/icon-120.png">
    <link rel="apple-touch-icon" sizes="76x76" href="assets/icon-76.png">
    <link rel="apple-touch-icon" sizes="152x152" href="assets/icon-152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="assets/icon-180.png">
    <meta name="msapplication-TileImage" content="assets/icon-144.png">
    <link rel="icon" sizes="any" href="assets/icon.svg" type="image/svg+xml">

    <!-- Scripts -->
    <script src="item-finder.js" async></script>
    <script src="libraries/tablesort.min.js" async></script>
</head>

<body>
    <header>
        <h1>Stardew Valley Item Finder</h1>
    </header>

    <section class="text">
        <p>This tool extracts information about all of your items in Stardew Valley and displays it in a table. The
            table shows the items’ names, locations, and prices.</p>
        <h2>Instructions</h2>
        <p>
            You’ll need to upload your save file below to begin. Your save file is named <code>Name_123456789</code>,
            where <code>Name</code>
            is your player’s name and <code>123456789</code> is a random 9-digit number. The save file can be found in
            <a href="https://stardewvalleywiki.com/Saves#Find_your_save_files">one of the following folders</a>:
        </p>
        <dl>
            <dt>Windows</dt>
            <dd><code>%appdata%\StardewValley\Saves</code></dd>
            <dt>Linux and macOS</dt>
            <dd><code>~/.config/StardewValley/Saves</code></dd>
        </dl>
        <p>
            You can sort the table by clicking on the headers, and you can download the table as a <abbr>CSV</abbr>
            file to use in Excel. You can also click on an item name to view its description from the <i>Stardew Valley
                Wiki</i>.
        </p>
    </section>

    <input type='file' onchange='file_opened(event)' aria-label="Browse for Save File">
    <div id="loading" class="message" style="display: none">Loading…</div>
    <div id="error" class="message" style="display: none">Error
        <div>Sorry about that. Please refresh and try again.</div>
    </div>

    <div>
        <!-- We need this empty div so that the contents are horizontally centered on the page. Without it, the contents are left aligned to the rest of the page. -->
        <article style="display: none" id="table_container">
            <h2>Items
                <input type="text" id="filter" class="input" onkeyup="filter_table()" placeholder="Filter"
                    title="Filter" role="search" aria-label="Filter Table"></input>
            </h2>
            <input type="button" id="down-button" class="input" value="Download as CSV"
                onclick="download_as_csv(csv_string)" />

        </article>
    </div>

    <section class="text">
        <h2>About</h2>
        <p>
            This tool runs entirely inside the browser. Your save file is never sent across the network.
        </p>
        <p>
            Source code repository located at <a
                href="https://github.com/gucci-on-fleek/Stardew-Valley-Item-Finder">https://github.com/gucci-on-fleek/Stardew-Valley-Item-Finder</a>.
            Inspired by the <a href="https://mouseypounds.github.io/stardew-fair-helper/">Stardew Fair Helper</a>.
        </p>
        <p>
            For support, feedback, and general questions, please <a
                href="https://github.com/gucci-on-fleek/Stardew-Valley-Item-Finder/issues/new/choose"> submit an
                issue</a> on GitHub.
        </p>
        <h2>Advanced Usage</h2>
        <h3>Offline Use</h3>
        <p>
            This tool fully supports offline usage. After the first load, no internet access is required.</p>
        <h3>Regular Expressions</h3>
        <p>
            The filter fully supports Regular Expressions. For most users, the most important part is that you can
            search
            for multiple items at a time by separating them with a pipe (<code>|</code>). For example, to show all
            carrots
            and potatoes, you would type <code>carrot|potato</code>.</p>
        <h3>Running from the Command Line</h3>
        <p>
            Advanced users can convert their save files to <abbr>CSV</abbr> on the command line. First,
            you’ll need to
            download the <abbr>XSLT</abbr> files from the <a
                href="https://github.com/gucci-on-fleek/Stardew-Valley-Item-Finder">source code repository</a>.
            Then, using <a href="http://xmlsoft.org/XSLT/xsltproc.html"><code>xsltproc</code></a>:</p>
        <code class="block">
xsltproc items.xslt Name_123456789 | xsltproc items-to-csv.xslt - > items.csv
        </code>
    </section>

    <footer>
        <ul>
            <li>Made by <a href="https://github.com/gucci-on-fleek">gucci-on-fleek</a></li>
            <li> View on <a href="https://github.com/gucci-on-fleek/Stardew-Valley-Item-Finder">GitHub</a></li>
        </ul>
    </footer>

    <template id="table_base">
        <table id="item_table">
            <thead>
            </thead>
            <tbody></tbody>
            <tfoot></tfoot>
        </table>
    </template>

    <template id="header_cell_base">
        <th tabindex="0"></th>
    </template>

    <template id="header_base">
        <tr class="header"></tr>
    </template>

    <template id="silver_base">
        <img src="assets/silver_star.png" class="icon" alt="Silver" title="Silver" />
        <div class="sort-id">1 Silver</div>
    </template>

    <template id="gold_base">
        <img src="assets/gold_star.png" class="icon" alt="Gold" alt="Gold" title="Gold" />
        <div class="sort-id">2 Gold</div>

    </template>
    <template id="iridium_base">
        <img src="assets/iridium_star.png" class="icon" alt="Iridium" title="Iridium" />
        <div class="sort-id">3 Iridium</div>
    </template>

    <template id="wiki_query_base">
        <script src="https://stardewvalleywiki.com/mediawiki/api.php?" referrerpolicy="origin" id="wiki_query"></script>
    </template>

    <template id="wiki_link">
        <a href='https://stardewvalleywiki.com/'>See more on the <i>Stardew Valley Wiki</i></a>.
    </template>

    <template id="wiki_search">
        <a href='https://stardewvalleywiki.com/mediawiki/index.php?title=Special:Search&search='>Try searching the
            <i>Stardew Valley Wiki</i></a>.
    </template>

</body>

</html>
